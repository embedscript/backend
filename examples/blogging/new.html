<div id="content"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/3.0.0/mustache.js"></script>
<script src="https://determined-shaw-741e5d.netlify.app/assets/micro.js"></script>
<script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function (event) {
    var template = `
      <input id="post-title"><br /><br />
      <textarea id="post-content"></textarea><br /><br />
      <button id="save-button" type="button">Save</button>
    `;
    document.getElementById("content").innerHTML = template;

    document.getElementById("save-button").onclick = function () {
      Micro.requireLogin(function () {
        Micro.post(
          "posts/save",
          "backend",
          {
            website: "example.com",
            title: document.getElementById("post-title").value,
            content: document.getElementById("post-content").value,
          },
          function (data) {
            console.log("Successfully saved.");
          }
        );
      });
    };
  });
</script>
